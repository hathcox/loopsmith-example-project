# Story 1.3: Player Setup — Cube with WASD Physics Movement

Status: ready-for-dev

## Story

As a player,
I want to move a cube across the ground plane using WASD keys,
So that I can navigate the play area.

## Acceptance Criteria

1. A `PlayerSetup.cs` setup class in `Assets/Scripts/Setup/` programmatically creates the player cube in the GameScene
2. The player cube has a Rigidbody (non-kinematic, gravity enabled) and BoxCollider (non-trigger) configured via setup code
3. The player cube has a PlayerController MonoBehaviour attached via setup code
4. A PlayerMaterial (URP Lit) is generated into `Assets/Generated/Materials/` and applied to the cube
5. The player cube is tagged "Player" via setup code
6. When the player presses W, A, S, or D keys, the player cube moves in the corresponding direction using Rigidbody physics (not Transform translation)
7. Movement is applied via AddForce or velocity in FixedUpdate
8. The PlayerController reads input via Legacy Input Manager (`Input.GetAxis`)

## Tasks / Subtasks

- [ ] Task 1: Create PlayerController MonoBehaviour (AC: #6, #7, #8)
  - [ ] Create `Assets/Scripts/PlayerController.cs`
  - [ ] Read horizontal input via `Input.GetAxis("Horizontal")` and vertical via `Input.GetAxis("Vertical")`
  - [ ] Apply movement force to Rigidbody in `FixedUpdate` using `AddForce` or direct velocity setting
  - [ ] Define movement speed as a private constant (e.g., `private const float MoveSpeed = 10f;`)
  - [ ] Cache Rigidbody reference in `Awake()` using `GetComponent<Rigidbody>()`
  - [ ] Constrain Rigidbody rotation to prevent cube from tipping (freeze X and Z rotation)
- [ ] Task 2: Create PlayerSetup class (AC: #1, #2, #3, #4, #5)
  - [ ] Create `Assets/Scripts/Setup/PlayerSetup.cs` implementing `IGameSetup`
  - [ ] Set `ExecutionOrder` after SceneSetup (e.g., order 200)
  - [ ] Create player cube via `GameObject.CreatePrimitive(PrimitiveType.Cube)`
  - [ ] Add and configure Rigidbody: non-kinematic, gravity enabled, freeze X/Z rotation
  - [ ] Ensure BoxCollider is non-trigger (default)
  - [ ] Attach PlayerController component via `AddComponent<PlayerController>()`
  - [ ] Generate PlayerMaterial (URP Lit) into `Assets/Generated/Materials/`
  - [ ] Apply PlayerMaterial to cube's MeshRenderer
  - [ ] Set tag to "Player"
  - [ ] Position cube on top of ground plane at center

## Dev Notes

### Architecture Compliance

- **Thin MonoBehaviour Pattern:** PlayerController is a thin wrapper — reads input and applies physics. No game logic (score, win) in this class.
- **Setup-Oriented:** All GameObject creation, component attachment, and configuration done in PlayerSetup.cs. No Inspector configuration.
- **Naming:** `PlayerController.cs` in `Assets/Scripts/`, `PlayerSetup.cs` in `Assets/Scripts/Setup/`
- **Private fields:** Use underscore prefix: `_rigidbody`, `_moveDirection`
- **Events:** PlayerController does NOT use events — it's input→physics only

### Technical Requirements

- **Input:** Legacy Input Manager only. `Input.GetAxis("Horizontal")` maps to A/D keys. `Input.GetAxis("Vertical")` maps to W/S keys.
- **Physics:** Use `Rigidbody.AddForce(movement * MoveSpeed)` or `Rigidbody.velocity = new Vector3(h * MoveSpeed, rb.velocity.y, v * MoveSpeed)`
- **FixedUpdate:** All physics operations MUST be in `FixedUpdate`, not `Update`
- **Rotation Freeze:** Set `Rigidbody.constraints = RigidbodyConstraints.FreezeRotationX | RigidbodyConstraints.FreezeRotationZ` to prevent tipping
- **Player position:** Start at `(0, 0.5f, 0)` — half unit above ground plane origin so cube sits on surface
- **WASD Mapping:** W=forward (+Z), S=back (-Z), A=left (-X), D=right (+X) in top-down view. Verify camera orientation alignment.

### File Structure Requirements

```
Assets/
├── Scripts/
│   ├── PlayerController.cs        # NEW - MonoBehaviour, input + physics
│   └── Setup/
│       └── PlayerSetup.cs         # NEW - creates player cube
├── Generated/
│   └── Materials/
│       └── PlayerMaterial.mat     # NEW - generated by PlayerSetup
```

### Testing Requirements

- PlayerController is a thin MonoBehaviour — no pure C# logic to unit test in this story
- Verification: WASD moves the cube smoothly across the ground plane in Play mode

### Anti-Patterns to Avoid

- Do NOT use `Transform.Translate()` — must use Rigidbody physics
- Do NOT use `FindObjectOfType` or `GameObject.Find` at runtime
- Do NOT put any game logic (score, collection) in PlayerController
- Do NOT use `Update()` for physics — use `FixedUpdate()`

### Dependencies

- **Requires Story 1.1:** IGameSetup interface, SetupRunner
- **Requires Story 1.2:** SceneSetup with ground plane and camera

### References

- [Source: _bmad-output/planning-artifacts/architecture.md#Testability Pattern]
- [Source: _bmad-output/planning-artifacts/architecture.md#Physics Configuration]
- [Source: _bmad-output/planning-artifacts/architecture.md#Component Architecture]
- [Source: _bmad-output/planning-artifacts/epics.md#Story 1.3]

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List
